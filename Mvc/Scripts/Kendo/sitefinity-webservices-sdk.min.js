!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Sitefinity=e():t.Sitefinity=e()}(window,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=9)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.isString=function(t){return"string"==typeof t||t instanceof String},t.isBoolean=function(t){return"boolean"==typeof t},t.isBlob=function(t){return t instanceof Blob},t.isNumber=function(t){return"number"==typeof t&&isFinite(t)},t.serializeToJSON=function(e){return t.isString(e)||this.isBlob(e)?e:JSON.stringify(e)},t.parseStringToJson=function(e){if(!e)return null;var r=Number(e);if(!isNaN(r))return r;var n=null;try{n=JSON.parse(e),n=t._parseDateProperties(n)}catch(t){console.log("An unexpected error occurred while parsing the response from server: "+t.message+". Response body was: '"+e+"'")}return n},t.hex16=function(){return Math.floor(65536*(1+Math.random())).toString(16).substr(1)},t.addTrailingSlash=function(e){return e=t.removeSlashes(e),e+="/"},t.removeSlashes=function(t){var e=t;return"/"==e.substr(0,1)&&(e=e.substr(1)),"/"==e.substr(-1)&&(e=e.substr(0,e.length-1)),e},t.clone=function(t,e,r){for(var n in void 0===e&&(e={}),void 0===r&&(r=null),e||(e={}),t)t[n]&&t[n].constructor&&t[n].constructor===Object&&"function"==typeof t[n]?(e[n]=e[n]||{},arguments.callee(e[n],t[n])):e[n]=t[n],"function"==typeof r&&r(e);return e},t._parseDateProperties=function(e){for(var r in e)e[r]instanceof Array||e[r]instanceof Object&&!e[r]instanceof Function?this._parseDateProperties(e[r]):e[r]=t._tryFormatFieldToDate(e[r]);return e},t._tryFormatFieldToDate=function(t){return/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*))(?:Z|(\+|-)([\d|:]*))?$/.test(t)&&(t=new Date(t)),t},t.convertDateFieldToISOString=function(t){for(var e in t)t[e]instanceof Date&&(t[e]=t[e].toISOString());return t},t}();e.utils=n},function(t,e,r){"use strict";r.r(e),r.d(e,"__extends",function(){return o}),r.d(e,"__assign",function(){return i}),r.d(e,"__rest",function(){return a}),r.d(e,"__decorate",function(){return s}),r.d(e,"__param",function(){return u}),r.d(e,"__metadata",function(){return p}),r.d(e,"__awaiter",function(){return c}),r.d(e,"__generator",function(){return l}),r.d(e,"__exportStar",function(){return y}),r.d(e,"__values",function(){return d}),r.d(e,"__read",function(){return f}),r.d(e,"__spread",function(){return h}),r.d(e,"__await",function(){return _}),r.d(e,"__asyncGenerator",function(){return v}),r.d(e,"__asyncDelegator",function(){return g}),r.d(e,"__asyncValues",function(){return b}),r.d(e,"__makeTemplateObject",function(){return P}),r.d(e,"__importStar",function(){return m}),r.d(e,"__importDefault",function(){return O});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};function o(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};function a(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&(r[n[o]]=t[n[o]])}return r}function s(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a}function u(t,e){return function(r,n){e(r,n,t)}}function p(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,s)}u((n=n.apply(t,e||[])).next())})}function l(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function y(t,e){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}function d(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}function f(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function h(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(f(arguments[e]));return t}function _(t){return this instanceof _?(this.v=t,this):new _(t)}function v(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(t){o[t]&&(n[t]=function(e){return new Promise(function(r,n){i.push([t,e,r,n])>1||s(t,e)})})}function s(t,e){try{(r=o[t](e)).value instanceof _?Promise.resolve(r.value.v).then(u,p):c(i[0][2],r)}catch(t){c(i[0][3],t)}var r}function u(t){s("next",t)}function p(t){s("throw",t)}function c(t,e){t(e),i.shift(),i.length&&s(i[0][0],i[0][1])}}function g(t){var e,r;return e={},n("next"),n("throw",function(t){throw t}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,o){e[n]=t[n]?function(e){return(r=!r)?{value:_(t[n](e)),done:"return"===n}:o?o(e):e}:o}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=d(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise(function(n,o){(function(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)})(n,o,(e=t[r](e)).done,e.value)})}}}function P(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function m(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function O(t){return t&&t.__esModule?t:{default:t}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={ExpressionType:{query:1,where:100,and:"and",or:"or",not:"not",eq:"eq",ne:"ne",lt:"lt",le:"le",gt:"gt",ge:"ge",any:"any",contains:"contains",startsWith:"startsWith",endsWith:"endsWith"},ODataParams:{$filter:"$filter",$select:"$select",$expand:"$expand",$orderby:"$orderby",$skip:"$skip",$top:"$top",$count:"$count",$search:"$search"},SfParams:{provider:"sf_provider",culture:"sf_culture",siteId:"sf_site"}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.headerNames={contentType:"Content-Type",authorization:"Authorization",contentEncoding:"Content-Encoding",operation:"X-Operation",properties:"X-Sf-Properties",fileName:"X-File-Name",serviceRequest:"X-SF-Service-Request"}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(0),i=r(2).default,a=r(3).headerNames,s=r(12).default,u=r(5).default,p=function(){function t(t){this.successCb=t.successCb,this.failureCb=t.failureCb,this.urlOptions=t.urlOptions,this.progressCb=t.progressCb,this.key=t.key,this.action=t.action,this._fallbackProperties=t.fallbackProperties}return t.prototype._getBody=function(){},t.prototype._getMethod=function(){return null},t.prototype._getHeaders=function(){var t={};return t[a.contentType]=s.json,t},t.prototype._getQueryParameters=function(t,e){var r=i.SfParams;if(e.SFParams){var n=e.SFParams;n.provider&&(t[r.provider]=n.provider),n.culture&&(t[r.culture]=n.culture),n.siteId&&(t[r.siteId]=n.siteId)}this._fallbackProperties&&(t.sf_fallback_prop_names=this._fallbackProperties.join())},t.prototype._getQueryString=function(t){var e={};if(this._getQueryParameters(e,t),0==Object.keys(e).length)return null;var r="?";for(var n in e)r+=n+"="+e[n]+"&";return r=r.substring(0,r.length-1)},t.prototype._buildUrl=function(){var t=this.urlOptions.baseUrl+(this.urlOptions.entitySet||"");if(t+=this.key?"("+this.key+")":"",t+=this.action?"/"+this.action:"",this.urlOptions.ODataParams){var e=this.urlOptions.ODataParams.build().$count;o.utils.isBoolean(e)&&!e&&(t+="/$count")}return this._addQueryParameters(t)},t.prototype._parseResponse=function(t){var e=o.utils.parseStringToJson(t.responseText);return e?t.status>=400&&e.error?e.error:e:t.responseText},t.prototype._addQueryParameters=function(t){var e=this._getQueryString(this.urlOptions);return e&&(t.indexOf("?")>-1&&"?"==e[0]&&(e="&"+e.substring(1)),t+=e),t},t}();e.RequestBase=p;var c=function(t){function e(e){return t.call(this,e)||this}return n.__extends(e,t),e.prototype._getMethod=function(){return u.Get},e.prototype._getQueryParameters=function(e,r){var n=i.ODataParams;if(r.ODataParams){var a=r.ODataParams.build();o.utils.isString(a.$filter)&&(e[n.$filter]=a.$filter),o.utils.isString(a.$select)&&(e[n.$select]=a.$select),o.utils.isString(a.$expand)&&(e[n.$expand]=a.$expand),o.utils.isString(a.$orderby)&&(e[n.$orderby]=a.$orderby),o.utils.isNumber(a.$skip)&&(e[n.$skip]=a.$skip),o.utils.isNumber(a.$top)&&(e[n.$top]=a.$top),o.utils.isString(a.$search)&&(e[n.$search]=a.$search),o.utils.isBoolean(a.$count)&&a.$count&&(e[n.$count]=a.$count)}t.prototype._getQueryParameters.call(this,e,r)},e}(p);e.GetRequest=c;var l=function(t){function e(e){return t.call(this,e)||this}return n.__extends(e,t),e.prototype._getMethod=function(){return u.Get},e.prototype._getQueryParameters=function(e,r){var n=i.ODataParams;if(r.ODataParams){var a=r.ODataParams.build();o.utils.isString(a.$select)&&(e[n.$select]=a.$select),o.utils.isString(a.$expand)&&(e[n.$expand]=a.$expand)}t.prototype._getQueryParameters.call(this,e,r)},e}(p);e.GetByIdRequest=l;var y=function(t){function e(e){return t.call(this,e)||this}return n.__extends(e,t),e.prototype._getMethod=function(){return u.Delete},e}(p);e.DeleteRequest=y;var d=function(t){function e(e){var r=t.call(this,e)||this;return r._data=e.data,r._saveTemp=e.saveTemp,r}return n.__extends(e,t),e.prototype._getMethod=function(){return u.Patch},e.prototype._getBody=function(){return o.utils.convertDateFieldToISOString(this._data)},e.prototype._getHeaders=function(){var t=p.prototype._getHeaders.call(this);return this._saveTemp&&(t[a.operation]="SaveTemp"),t},e}(p);e.UpdateRequest=d;var f=function(t){function e(e){var r=t.call(this,e)||this;return r._data=e.data,r}return n.__extends(e,t),e.prototype._getMethod=function(){return u.Post},e.prototype._getBody=function(){return o.utils.convertDateFieldToISOString(this._data)},e}(p);e.CreateRequest=f;var h=function(t){function e(e){var r=t.call(this,e)||this;return r.navigationProperty=e.navigationProperty,r}return n.__extends(e,t),e.prototype._buildUrl=function(){var t=this.urlOptions.baseUrl+this.urlOptions.entitySet+"("+this.key+")/"+this.navigationProperty;return this._addQueryParameters(t)},e}(l);e.GetRelatedRequest=h;var _=function(t){function e(e){var r=t.call(this,e)||this;return r.navigationProperty=e.navigationProperty,r.relatedKey=e.relatedKey,r}return n.__extends(e,t),e.prototype._buildUrl=function(){var t=this.urlOptions.baseUrl+this.urlOptions.entitySet+"("+this.key+")/"+this.navigationProperty+"("+this.relatedKey+")";return this._addQueryParameters(t)},e}(l);e.GetRelatedByIdRequest=_;var v=function(t){function e(e){var r=t.call(this,e)||this;return r.navigationProperty=e.navigationProperty,r}return n.__extends(e,t),e.prototype._buildUrl=function(){var t=this.urlOptions.baseUrl+this.urlOptions.entitySet+"("+this.key+")/"+this.navigationProperty+"/$ref";return this._addQueryParameters(t)},e}(y);e.DeleteRelatedRequest=v;var g=function(t){function e(e){var r=t.call(this,e)||this;return r.navigationProperty=e.navigationProperty,r.relatedKey=e.relatedKey,r}return n.__extends(e,t),e.prototype._buildUrl=function(){var t=this.urlOptions.baseUrl+this.urlOptions.entitySet+"("+this.key+")/"+this.navigationProperty+"("+this.relatedKey+")/$ref";return this._addQueryParameters(t)},e}(y);e.DeleteRelatedByIdRequest=g;var b=function(t){function e(e){var r=t.call(this,e)||this;return r.navigationProperty=e.navigationProperty,r.key=e.key,r}return n.__extends(e,t),e.prototype._buildUrl=function(){var t=this.urlOptions.baseUrl+this.urlOptions.entitySet+"("+this.key+")/"+this.navigationProperty+"/$ref";return this._addQueryParameters(t)},e}(f);e.CreateRelatedRequest=b;var P=function(t){function e(e){var r=t.call(this,e)||this;return r.fileName=e.fileName,r.uploadProperties=e.uploadProperties,r.contentType=e.contentType,r}return n.__extends(e,t),e.prototype._getHeaders=function(){var e=t.prototype._getHeaders.call(this);return e[a.contentType]=this.contentType||"application/octet-stream",e[a.fileName]=this.fileName,e[a.properties]=this.uploadProperties,e[a.contentEncoding]="identity",e},e.prototype._getBody=function(){return this._data},e}(f);e.UploadRequest=P},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={Get:"GET",Put:"PUT",Post:"POST",Patch:"PATCH",Delete:"DELETE"}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(7),o=r(2).default.ExpressionType,i=function(){function t(t,e){void 0===e&&(e=o.and),this.parent=t,this.expression=new n.ComplexExpression(e,[])}return t.prototype.and=function(){return new t(this,o.and)},t.prototype.or=function(){return new t(this,o.or)},t.prototype.any=function(){return new t(this,o.any)},t.prototype.not=function(){return new t(this,o.not)},t.prototype._simple=function(t,e,r){var i=new n.BinaryExpression(t,e,r),a=this.expression.getExpressions();if(a.push(i),this.expression.getType()===o.not&&a.length>1)throw new Error("Invalid operators count!");return this},t.prototype.eq=function(t,e){return this._simple(o.eq,t,e)},t.prototype.ne=function(t,e){return this._simple(o.ne,t,e)},t.prototype.gt=function(t,e){return this._simple(o.gt,t,e)},t.prototype.gte=function(t,e){return this._simple(o.ge,t,e)},t.prototype.lt=function(t,e){return this._simple(o.lt,t,e)},t.prototype.lte=function(t,e){return this._simple(o.le,t,e)},t.prototype.startsWith=function(t,e){return this._simple(o.startsWith,t,e)},t.prototype.contains=function(t,e){return this._simple(o.contains,t,e)},t.prototype.endsWith=function(t,e){return this._simple(o.endsWith,t,e)},t.prototype.done=function(){return this.parent instanceof t&&(this.parent._addComplexExpression(this),this.expression.getType(),o.not),this.parent},t.prototype._getExpression=function(){return this.expression},t.prototype._addComplexExpression=function(t){var e=t._getExpression();this.expression.getExpressions().push(e)},t}();e.WhereQuery=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=function(){function t(t){this.type=t}return t.prototype.getType=function(){return this.type},t}();e.ExpressionBase=o;var i=function(t){function e(e,r,n){var o=t.call(this,e)||this;return o.parameter=r,o.constant=n,o}return n.__extends(e,t),e.prototype.getParameter=function(){return this.parameter},e.prototype.getConstant=function(){return this.constant},e}(o);e.BinaryExpression=i;var a=function(t){function e(e,r){var n=t.call(this,e)||this;return n.expressions=r,n}return n.__extends(e,t),e.prototype.getExpressions=function(){return this.expressions},e}(o);e.ComplexExpression=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=function(){function t(t,e){if(void 0===e&&(e=null),this.propertyPath=t,this.isDesc=e,!n.utils.isString(t))throw new Error("Property name is not a valid string");var r=(t=t.trim()).split(" ");if(r.length>1&&!0!==e&&!1!==e&&!((e="desc"==r[1].toLowerCase())||"asc"==r[1].toLowerCase()))throw new Error("the second word in the propertyPath must begin with 'desc' or 'asc'");this.propertyPath=r[0],this.isDesc=e}return t.prototype.getPropertyPath=function(){return this.propertyPath},t.prototype.getDirection=function(){return this.isDesc},t.prototype.getValue=function(){var t=this.isDesc?"desc":"asc";return this.propertyPath+" "+t},t}();e.OrderProperty=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(10);t.exports=n.Sitefinity},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(11),o=r(16),i=r(17),a=r(18),s=r(0),u=function(){function t(t){this.profileUrl=s.utils.addTrailingSlash(t.serviceUrl),this.siteId=t.siteId,this.factory=new n.RequestFactory({handlers:t.handlers}),this.authentication=new o.Authentication({serviceUrl:this.profileUrl,factory:this.factory})}return t.prototype.data=function(t){var e={baseUrl:this.profileUrl,SFParams:{provider:t.providerName,culture:t.cultureName,siteId:t.siteId||this.siteId},entitySet:t.urlName};return this.factory.token=this.authentication.getToken(),new i.Data(e,this.factory)},t.prototype.batch=function(t,e,r,n){"function"!=typeof r&&(n=r,r=null),n||(n={}),this.factory.token=this.authentication.getToken();var o=this.factory.batch({successCb:t,failureCb:e,progressCb:r,urlOptions:{baseUrl:this.profileUrl,SFParams:{provider:n.providerName,culture:n.cultureName,siteId:this.siteId}}}),i=this.factory.createExecutor(o);return i.beginTransaction=function(){return o.beginTransaction()},i.endTransaction=function(t){o.endTransaction(t)},i.get=function(t){o.constructor.prototype.get.call(o,t)},i.getOperations=function(t){o.constructor.prototype.getOperations.call(o,t)},i.getSingle=function(t){o.constructor.prototype.getSingle.call(o,t)},i.getProperty=function(t){o.constructor.prototype.getProperty.call(o,t)},i.getRelated=function(t){o.constructor.prototype.getRelated.call(o,t)},i.getRelatedById=function(t){o.constructor.prototype.getRelatedById.call(o,t)},i},t.Query=a.Query,t}();e.Sitefinity=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4),o=r(13),i=r(14),a=function(){function t(t){this.token=null,this.handlers=t.handlers}return t.prototype.get=function(t){return this.createExecutor(new n.GetRequest(t))},t.prototype.getSingle=function(t){return this.createExecutor(new n.GetByIdRequest(t))},t.prototype.create=function(t){return this.createExecutor(new n.CreateRequest(t))},t.prototype.update=function(t){return this.createExecutor(new n.UpdateRequest(t))},t.prototype.destroy=function(t){return this.createExecutor(new n.DeleteRequest(t))},t.prototype.getProperty=function(t){return this.createExecutor(new n.GetRelatedRequest(t))},t.prototype.getRelated=function(t){return this.createExecutor(new n.GetRelatedRequest(t))},t.prototype.getRelatedById=function(t){return this.createExecutor(new n.GetRelatedByIdRequest(t))},t.prototype.destroyRelated=function(t){return this.createExecutor(new n.DeleteRelatedRequest(t))},t.prototype.destroyRelatedById=function(t){return this.createExecutor(new n.DeleteRelatedByIdRequest(t))},t.prototype.createRelated=function(t){return this.createExecutor(new n.CreateRelatedRequest(t))},t.prototype.batch=function(t){return t._factory=this,new i(t)},t.prototype.upload=function(t){return this.createExecutor(new n.UploadRequest(t))},t.prototype.createExecutor=function(t){var e=new o.ExecutableRequest({request:t,handlers:this.handlers||{},token:this.token});return e.navigationProperty=t.navigationProperty,e},t}();e.RequestFactory=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={json:"application/json"}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=r(3).headerNames;function i(t){return"function"==typeof t}var a=function(){function t(t){this._getMethod=function(){return this.request._getMethod()},this._getHeaders=function(){return this.request._getHeaders()},this._getQueryString=function(t){return this.request._getQueryString(t)},this._buildUrl=function(){return this.request._buildUrl()},this.request=t.request,this.handlers=t.handlers,this.token=t.token}return t.prototype.execute=function(){this._execute()},t.prototype._execute=function(){var t=this,e=new XMLHttpRequest;if(e.onreadystatechange=function(){if(4===e.readyState&&e.status>0){var r=t.request._parseResponse(e);if(e.status>=200&&e.status<=206)i(t.request.successCb)&&t.request.successCb(r),t.handlers&&i(t.handlers.successCb)&&t.handlers.successCb(r);else if(e.status>=400){if(n.utils.isString(r))r={message:r};r.status=e.status,i(t.request.failureCb)&&t.request.failureCb(r),t.handlers&&i(t.handlers.failureCb)&&t.handlers.failureCb(r)}}},i(this.request.progressCb)&&e.upload){var r=this;e.upload.onprogress=function(t){r.request.progressCb(t)}}var o=this._getMethod(),a=this._buildUrl();e.open(o,a,!0),this.setHeaders(e,this._getHeaders()),e.send(this._getBody())},t.prototype.setHeaders=function(t,e){for(var r=Object.keys(e),n=0;n<r.length;n++){var i=r[n];t.setRequestHeader(i,e[i])}this.token&&("string"==typeof this.token?t.setRequestHeader(o.authorization,this.token):t.setRequestHeader(o.authorization,this.token.type+" "+this.token.value)),t.setRequestHeader(o.serviceRequest,"true")},t.prototype._getBody=function(){return n.utils.serializeToJSON(this.request._getBody())},t}();e.ExecutableRequest=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(4),i=r(15),a=r(0),s=r(3).headerNames,u=r(5).default,p=function(){function t(t,e){this.urlOptions=t,this._factory=e,this._requests=[],this._counter=0}return t.prototype.upload=function(t){var e={urlOptions:this.urlParametersClone(t.entitySet),data:t.data,contentType:t.contentType,fileName:t.fileName,uploadProperties:JSON.stringify(t.uploadProperties)},r=this._factory.upload(e);return this.addRequest(this,r)},t.prototype.create=function(t){if(!t&&!t.entitySet)throw"entitySet is required!";var e=this.urlParametersClone(t.entitySet),r={key:t.key,action:t.action,urlOptions:e,data:JSON.stringify(t.data)},n=this._factory.create(r);return this.addRequest(this,n)},t.prototype.operation=function(t){if(!(t||t.entitySet||t.key||t.data))throw"parameters: entitySet, key and data are required!";var e={urlOptions:this.urlParametersClone(t.entitySet),key:t.key,action:"operation",data:JSON.stringify(t.data)},r=this._factory.create(e);this._overrideUrlGeneration(r,t.key,"operation",e.urlOptions),this.addRequest(this,r)},t.prototype.update=function(t){if(!(t||t.entitySet||t.key||t.data))throw"parameters: entitySet, key and data are required!";var e={urlOptions:this.urlParametersClone(t.entitySet),saveTemp:t.saveTemp,key:t.key,data:JSON.stringify(t.data)},r=this._factory.update(e);this._overrideUrlGeneration(r,t.key,void 0,e.urlOptions),this.addRequest(this,r)},t.prototype.destroy=function(t){if(!(t||t.entitySet||t.key))throw"parameters: entitySet and key are required!";var e={urlOptions:this.urlParametersClone(t.entitySet),key:t.key},r=this._factory.destroy(e);this._overrideUrlGeneration(r,t.key,void 0,e.urlOptions),this.addRequest(this,r)},t.prototype.destroyRelated=function(t){if(!(t||t.entitySet||t.key))throw"parameters: entitySet and key are required!";var e={urlOptions:this.urlParametersClone(t.entitySet),key:t.key,navigationProperty:t.navigationProperty},r=this._factory.destroyRelated(e),n=r.navigationProperty+"/$ref";this._overrideUrlGeneration(r,t.key,n,e.urlOptions),this.addRequest(this,r)},t.prototype.destroyRelatedById=function(t){if(!(t||t.entitySet||t.key||t.relatedKey||t.navigationProperty))throw"parameters: entitySet, key, relatedKey and navigationProperty are required!";var e={urlOptions:this.urlParametersClone(t.entitySet),key:t.key,relatedKey:t.relatedKey,navigationProperty:t.navigationProperty},r=this._factory.destroyRelatedById(e);this.addRequest(this,r)},t.prototype.createRelated=function(t){if(!(t||t.entitySet||t.key||t.link||t.navigationProperty))throw"parameters: entitySet, key, link and navigationProperty are required!";for(var e=this.urlParametersClone(t.entitySet),r=0;r<this._requests.length;r+=1)this._requests[r].id==t.link&&(t.link="$"+this._requests[r].id);var n={"@odata.id":t.link},o={urlOptions:e,key:t.key,navigationProperty:t.navigationProperty,data:JSON.stringify(n)},i=this._factory.createRelated(o),a=i.navigationProperty+"/$ref";return this._overrideUrlGeneration(i,t.key,a,o.urlOptions),this.addRequest(this,i)},t.prototype._overrideUrlGeneration=function(t,e,r,n){for(var o=0;o<this._requests.length;o+=1)this._requests[o].id==e&&(t._buildUrl=function(){var o="$"+e;if(void 0!==r&&(o=o+"/"+r),n){var i=t._getQueryString(n);i&&(o+=i)}return o})},t.prototype.addRequest=function(t,e){return t._requests.push({id:t._counter,request:e}),t._counter++},t.prototype.urlParametersClone=function(t){var e=a.utils.clone(this.urlOptions);return e.entitySet=t,e},t}(),c=function(t){function e(e){var r=t.call(this,e)||this;return r._factory=e._factory,r._requests=[],r._counter=0,r.boundary=r._createBoundary("sf_batch_"),r.responseHeaderRegex=/^([^()<>@,;:\\"\/[\]?={} \t]+)\s?:\s?(.*)/,r.responseStatusRegex=/^HTTP\/1\.\d (\d{3}) (.*)$/i,r}return n.__extends(e,t),e.prototype.get=function(t){if(!t&&!t.entitySet)throw"entitySet is required!";var e=this.urlParametersClone(t.entitySet);t&&t.query&&(e.ODataParams=t.query);var r={urlOptions:e,fallbackProperties:t.fallbackPropertyNames},n=this._factory.get(r);this.addRequest(n)},e.prototype.getSingle=function(t){if(!(t||t.entitySet||t.key))throw"parameters: entitySet and key are required!";var e={urlOptions:this.urlParametersClone(t.entitySet),key:t.key};t.query&&(e.ODataParams=t.query);var r=this._factory.getSingle(e);this.addRequest(r)},e.prototype.getProperty=function(t){if(t||t.entitySet||t.key,!t.property)throw"parameters: entitySet, key and property are required!";var e={urlOptions:this.urlParametersClone(t.entitySet),key:t.key,navigationProperty:t.property},r=this._factory.getProperty(e);this.addRequest(r)},e.prototype.getRelated=function(t){if(!(t||t.entitySet||t.key||t.navigationProperty))throw"parameters: entitySet, key and navigationProperty are required!";var e={urlOptions:this.urlParametersClone(t.entitySet),key:t.key,navigationProperty:t.navigationProperty},r=this._factory.getRelated(e);this.addRequest(r)},e.prototype.getRelatedById=function(t){if(!(t||t.entitySet||t.key||t.relatedKey||t.navigationProperty))throw"parameters: entitySet, key, relatedKey and navigationProperty are required!";var e={urlOptions:this.urlParametersClone(t.entitySet),key:t.key,relatedKey:t.relatedKey,navigationProperty:t.navigationProperty},r=this._factory.getRelatedById(e);this.addRequest(r)},e.prototype.beginTransaction=function(){var t=a.utils.clone(this.urlOptions),e=new p(t,this._factory);return e.id=++this._counter,e},e.prototype.endTransaction=function(t){this._requests.push({id:t.id,request:t})},e.prototype._getBody=function(){return this._buildRequestBody()},e.prototype._getMethod=function(){return u.Post},e.prototype._getHeaders=function(){var t="multipart/mixed; boundary="+this.boundary,e={};return e[s.contentType]=t,e},e.prototype._buildUrl=function(){var t=this.urlOptions.baseUrl+"$batch",e=this._getQueryString(this.urlOptions);return e&&(t+=e),t},e.prototype._parseResponse=function(t){var e={position:0,boundaries:[]},r=e.position,n=this._readHeaders(t.getAllResponseHeaders(),e),o=this._contentType(n["content-type"]);o&&"multipart/mixed"==o.mediaType&&e.boundaries.push(o.properties.boundary),e.position=r;for(var i=this._parseBatchResponse(t.responseText,e),a=[],s=0;s<i.length;s++)try{var u=null,p=i[s],c=p.__changeResponses;if(c){u=[];for(var l=0;l<c.length;l++){var y=c[l].response,d=this._getResponseResult(y);u.push(d)}}else{y=p.response;u=this._getResponseResult(y)}var f=function(t){return t.statusCode>=400},h=Array.isArray(u)?0===u.filter(f).length:!f(u);a.push({isSuccessful:h,response:u})}catch(t){continue}return{data:a,isSuccessful:0===a.filter(function(t){return!t.isSuccessful}).length}},e.prototype._parseBatchResponse=function(t,e){var r="--"+this._currentBoundary(e);this._readTo(t,r,e),this._readLine(t,e);for(var n,o=[];"--"!==n&&e.position<t.length;){var i,a=this._readHeaders(t,e),s=this._contentType(a["content-type"]);if(s&&"multipart/mixed"===s.mediaType){e.boundaries.push(s.properties.boundary);try{i=this._parseBatchResponse(t,e)}catch(n){n.response=this._readResponse(t,e,r),i=[n]}o.push({__changeResponses:i}),e.boundaries.pop(),this._readTo(t,"--"+this._currentBoundary(e),e)}else{if(!s||"application/http"!==s.mediaType)throw{message:"invalid MIME part type "};this._readLine(t,e);var u=this._readResponse(t,e,r);try{u=u.statusCode>=200&&u.statusCode<=299?{message:u.statusCode+" Http request is OK",response:u}:{message:"HTTP request failed",response:u}}catch(t){u=t}o.push(u)}n=t.substr(e.position,2),this._readLine(t,e)}return o},e.prototype._getResponseResult=function(t){var e=t.body;return{data:a.utils.parseStringToJson(e),statusCode:t.statusCode,headers:t.headers}},e.prototype._currentBoundary=function(t){var e=t.boundaries;return e[e.length-1]},e.prototype._contentType=function(t){if(!t)return null;var e,r,n=t.split(";"),o={};for(e=1,r=n.length;e<r;e++){var i=n[e].split("=");o[i[0].replace(/^\s+|\s+$/g,"")]=i[1]}return{mediaType:n[0].replace(/^\s+|\s+$/g,""),properties:o}},e.prototype._readTo=function(t,e,r){var n=r.position||0,o=t.length;if(e){if(-1===(o=t.indexOf(e,n)))return null;r.position=o+e.length}else r.position=o;return t.substring(n,o)},e.prototype._readLine=function(t,r){return this._readTo(t,e.constants.newLine,r)},e.prototype._readHeaders=function(t,e){var r,n,o,i={};do{o=e.position,n=this._readLine(t,e),null!==(r=this.responseHeaderRegex.exec(n))?i[r[1].toLowerCase()]=r[2]:e.position=o}while(n&&r);return i},e.prototype._readResponse=function(t,e,r){var n,o,i,a=e.position,s=this.responseStatusRegex.exec(this._readLine(t,e));return s?(n=s[1],o=s[2],i=this._readHeaders(t,e),this._readLine(t,e)):e.position=a,{statusCode:n,statusText:o,headers:i,body:this._readTo(t,"\r\n"+r,e)}},e.prototype._buildRequestBody=function(){var t=new i.BlobBuilder;t.append("");for(var r=0;r<this._requests.length;r+=1){var n=this._requests[r].request;0!=r&&t.append(e.constants.newLine+e.constants.newLine),t.append("--"+this.boundary),n instanceof p?t.append(this._buildTransaction(n)):t.append(this._buildRequest(n))}return t.append(this._createDelimeter(this.boundary,!0)),t.build()},e.prototype._buildRequest=function(t){var r=new i.BlobBuilder;return r.append(e.constants.newLine+"Content-Type: application/http"+e.constants.newLine+"Content-Transfer-Encoding: binary"+e.constants.newLine+e.constants.newLine+t._getMethod()+" "+t._buildUrl()+" HTTP/1.1"),r.build()},e.prototype._buildTransaction=function(t){if(0!=t._requests.length){var r=new i.BlobBuilder;r.append(e.constants.newLine);var n=this._createBoundary("sf_changeset_");r.append("Content-Type: multipart/mixed; boundary="+n);for(var o=t._requests,a=0;a<o.length;a+=1){var s=o[a].request;r.append(this._createDelimeter(n,!1)+e.constants.newLine+"Content-Type: application/http"+e.constants.newLine+"Content-Transfer-Encoding: binary"+e.constants.newLine+"Content-ID: "+o[a].id);var u=s._buildUrl();r.append("\r\n\r\n"+s._getMethod()+" "+u+" HTTP/1.1");for(var p=s._getHeaders(),c=Object.keys(p),l=0;l<c.length;l++){var y=c[l];r.append(e.constants.newLine+y+": "+p[y])}var d=s._getBody();d&&(r.append("\r\n\r\n"),r.append(d))}return r.append(this._createDelimeter(n,!0)),r.build()}},e.prototype._createDelimeter=function(t,r){var n=e.constants.newLine+e.constants.newLine+"--"+t;return r&&(n+="--"),n},e.prototype._createBoundary=function(t){return t+a.utils.hex16()+"-"+a.utils.hex16()+"-"+a.utils.hex16()},e.prototype.addRequest=function(t){return p.prototype.addRequest(this,t)},e.prototype.urlParametersClone=function(t){return p.prototype.urlParametersClone.call(this,t)},e.constants={newLine:"\r\n"},e}(o.RequestBase);t.exports=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this._blob=new Blob}return t.prototype.append=function(t){this._blob=new Blob([this._blob,t])},t.prototype.build=function(){return this._blob},t}();e.BlobBuilder=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._token=null,this._serviceUrl=t.serviceUrl,this.factory=t.factory}return t.prototype.login=function(t,e,r,n){var o=this;this.factory.create({data:{username:t,password:e},urlOptions:{baseUrl:o._serviceUrl+"login"},successCb:function(t){o.setToken(t.value),"function"==typeof r&&r(t.value)},failureCb:n})._execute()},t.prototype.logout=function(t,e){var r=this;this.factory.create({urlOptions:{baseUrl:r._serviceUrl+"logout",token:r.getToken()},successCb:function(e){r.setToken(null),"function"==typeof t&&t(e)},failureCb:e})._execute()},t.prototype.setToken=function(t){this._token=t},t.prototype.getToken=function(){return this._token},t}();e.Authentication=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.urlOptions=t,this.factory=e}return t.prototype.get=function(t){(t=t||{}).query&&(this.urlOptions.ODataParams=t.query),this.factory.get({urlOptions:this.urlOptions,action:t.action,successCb:t.successCb,failureCb:t.failureCb,fallbackProperties:t.fallbackProperties})._execute()},t.prototype.getOperations=function(t){var e,r="operations";t.key||(r+="?parentId="+t.parentId);var n={urlOptions:this.urlOptions,action:r,successCb:t.successCb,failureCb:t.failureCb};t.key?(n.key=t.key,e=this.factory.getSingle(n)):e=this.factory.get(n),e._execute()},t.prototype.getSingle=function(t){if(!t.key)throw"Parameter 'key' is required!";t.query&&(this.urlOptions.ODataParams=t.query),this.factory.getSingle({urlOptions:this.urlOptions,key:t.key,action:t.action,successCb:t.successCb,failureCb:t.failureCb,fallbackProperties:t.fallbackProperties})._execute()},t.prototype.create=function(t){if(!t.data)throw"Parameter 'data' is required!";this.factory.create({urlOptions:this.urlOptions,key:t.key,data:t.data,action:t.action,successCb:t.successCb,failureCb:t.failureCb})._execute()},t.prototype.update=function(t){if(!t.key&&!t.data)throw"Parameters: 'data' and 'key' are required!";this.factory.update({urlOptions:this.urlOptions,key:t.key,data:t.data,action:t.action,saveTemp:t.saveTemp,successCb:t.successCb,failureCb:t.failureCb})._execute()},t.prototype.destroy=function(t){if(!t.key)throw"Parameter 'key' is required!";this.factory.destroy({urlOptions:this.urlOptions,key:t.key,successCb:t.successCb,failureCb:t.failureCb})._execute()},t.prototype.operation=function(t){if(!t.key&&!t.data)throw"Parameters: 'data' and 'key' are required!";this.factory.create({urlOptions:this.urlOptions,key:t.key,action:"operation",data:t.data,successCb:t.successCb,failureCb:t.failureCb})._execute()},t.prototype.getProperty=function(t){if(!t.key&&!t.property)throw"Parameters: 'data' and 'property' are required!";this.factory.getProperty({urlOptions:this.urlOptions,key:t.key,navigationProperty:t.property,successCb:t.successCb,failureCb:t.failureCb})._execute()},t.prototype.getRelated=function(t){if(!t.key&&!t.navigationProperty)throw"Parameters: 'data' and 'navigationProperty' are required!";this.factory.getRelated({urlOptions:this.urlOptions,key:t.key,navigationProperty:t.navigationProperty,successCb:t.successCb,failureCb:t.failureCb})._execute()},t.prototype.getRelatedById=function(t){if(!(t.key||t.navigationProperty||t.relatedKey))throw"Parameters: 'data', 'relatedKey' and 'navigationProperty' are required!";this.factory.getRelatedById({urlOptions:this.urlOptions,key:t.key,relatedKey:t.relatedKey,navigationProperty:t.navigationProperty,successCb:t.successCb,failureCb:t.failureCb})._execute()},t.prototype.destroyRelated=function(t){if(!t.key&&!t.navigationProperty)throw"Parameters: 'data' and 'navigationProperty' are required!";this.factory.destroyRelated({urlOptions:this.urlOptions,key:t.key,navigationProperty:t.navigationProperty,successCb:t.successCb,failureCb:t.failureCb})._execute()},t.prototype.destroyRelatedById=function(t){if(!(t.key||t.navigationProperty||t.relatedKey))throw"Parameters: 'data', 'relatedKey' and 'navigationProperty' are required!";this.factory.destroyRelatedById({urlOptions:this.urlOptions,key:t.key,relatedKey:t.relatedKey,navigationProperty:t.navigationProperty,successCb:t.successCb,failureCb:t.failureCb})._execute()},t.prototype.createRelated=function(t){if(!(t.key||t.navigationProperty||t.link))throw"Parameters: 'data', 'link' and 'navigationProperty' are required!";var e={"@odata.id":t.link};this.factory.createRelated({urlOptions:this.urlOptions,key:t.key,navigationProperty:t.navigationProperty,data:e,successCb:t.successCb,failureCb:t.failureCb})._execute()},t.prototype.upload=function(t){if(!(t||t.data||t.data.content||t.data.contentType||t.data||t.data.name||t.data.uploadProperties))throw"parameters: content, contentType, name and uploadProperties are required!";var e={urlOptions:this.urlOptions,_factory:this.factory,successCb:t.successCb,failureCb:t.failureCb},r=this.factory.batch(e),n=r.beginTransaction(),o=n.upload({entitySet:this.urlOptions.entitySet,data:t.data.content,contentType:t.data.contentType,fileName:t.data.name,uploadProperties:t.data.uploadProperties});t.data.payload&&n.update({entitySet:this.urlOptions.entitySet,key:o,data:t.data.payload}),!0===t.publish&&n.operation({entitySet:this.urlOptions.entitySet,key:o,data:{action:"Publish"}}),r.endTransaction(n),this.factory.createExecutor(r)._execute()},t}();e.Data=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(19),i=r(6),a=r(8),s=r(20),u=function(t){function e(){var e=t.call(this)||this;return e._order=null,e._skip=null,e._take=null,e._search=null,e._count=null,e.expr=null,e}return n.__extends(e,t),e.prototype.where=function(){return this._clone(function(t){t.expr=new i.WhereQuery(t)}).expr},e.prototype.order=function(){var t=this._extractArguments(arguments);return this._validatePropertyPaths(t),this._clone(function(e){for(var r=[],n=0;n<t.length;n++){var o=t[n],i=new a.OrderProperty(o);r.push(i)}e._order=r})},e.prototype.skip=function(t){return this._clone(function(e){e._skip=t})},e.prototype.take=function(t){return this._clone(function(e){e._take=t})},e.prototype.search=function(t){return this._clone(function(e){e._search=t})},e.prototype.count=function(t){return void 0===t&&(t=!0),this._clone(function(e){e._count=t})},e.prototype._getFilter=function(){return this.expr},e.prototype._getOrderBy=function(){return this._order},e.prototype.build=function(){return new s.QueryBuilder(this).build()},e}(o.QueryBase);e.Query=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),o=function(){function t(){this._select=null,this._expand=null}return t.prototype.select=function(){var t=this._extractArguments(arguments);return this._validatePropertyPaths(t),this._clone(function(e){e._select=t})},t.prototype.expand=function(){var t=this._extractArguments(arguments);return this._validatePropertyPaths(t),this._clone(function(e){e._expand=t})},t.prototype._extractArguments=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r]);return e},t.prototype._getSelect=function(){return this._select},t.prototype._getExpand=function(){return this._expand},t.prototype._validatePropertyPaths=function(t,e){void 0===e&&(e=!1);for(var r=0;r<t.length;r++){var o=t[r];if(!n.utils.isString(o))throw new Error("Invalid argument in clause");if(!e&&o.indexOf(".")>-1)throw new Error("Invalid argument in clause")}},t.prototype._clone=function(e){return void 0===e&&(e=null),n.utils.clone(this,new t,e)},t}();e.QueryBase=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(6),o=r(7),i=r(8),a=r(0),s=r(2).default,u=function(){function t(t){this.query=t}return t.prototype.build=function(){var t={};return this._buildODataQueryParams(this.query,t),t},t.prototype._buildODataQueryParams=function(t,e){var r=s.ODataParams,u=t._getFilter();if(u instanceof n.WhereQuery){var p=u._getExpression();if(p instanceof o.ComplexExpression){var c=this._buildComplexExpression(p,null);c&&(e[r.$filter]=c)}}var l=t._getSelect();l instanceof Array&&(e[r.$select]=l.join(", "));var y=t._getExpand();y instanceof Array&&(e[r.$expand]=y.join(", "));var d=t._order;if(d instanceof Array){var f=[];for(var h in d)d[h]instanceof i.OrderProperty&&f.push(d[h].getValue());e[r.$orderby]=f.join(", ")}var _=t._take;a.utils.isNumber(_)&&(e[r.$top]=_);var v=t._skip;a.utils.isNumber(v)&&(e[r.$skip]=v);var g=t._search;g&&(e[r.$search]=g);var b=t._count;return null!==b&&(e[r.$count]=b),e},t.prototype._buildComplexExpression=function(t,e){if(!(t instanceof o.ComplexExpression))throw new Error("Invalid complex expression");var r=s.ExpressionType,n=0,i="",a=t.getExpressions();if(!a.length)return i;for(;;){var u=a[n];if(u instanceof o.BinaryExpression)i+=this._buildBinaryExpression(u);else if(u instanceof o.ComplexExpression){var p=this._buildComplexExpression(u,t.type);p&&(i+="("+p+")")}if(t.getType()===r.not&&(i=t.getType()+" "+i),t.getType()===r.any){for(var c=[],l=0;l<a.length;l++)a[l].type==r.contains||a[l].type==r.startsWith||a[l].type==r.endsWith?c.push(a[l].type.toLowerCase()+"(x, '"+a[l].constant+"')"):c.push("x "+a[l].type.toLowerCase()+" "+this._checkType(a[l].constant));i=u.parameter+"/"+t.getType()+"(x:"+c.join(" "+e+" ")+")"}if(++n==a.length)break;i+=" "+t.getType()+" "}return i},t.prototype._buildBinaryExpression=function(t){if(!(t instanceof o.BinaryExpression))throw new Error("Invalid binary expression");var e=s.ExpressionType,r=null,n=t.getType();switch(n){case e.eq:case e.ne:case e.lt:case e.le:case e.gt:case e.ge:var i=t.getConstant();r="("+t.getParameter()+" "+n+" "+this._checkType(i)+")";break;case e.contains:case e.startsWith:case e.endsWith:r=n.toLowerCase()+"("+t.getParameter()+", "+this._checkType(t.getConstant())+")";break;default:throw new Error("Unsupported operator "+n)}return r},t.prototype._checkType=function(t){return this._isGuid(t)?t:null==t?null:"'"+(t=(t=t.replace(/[+/?%#&]/g,function(t){return encodeURIComponent(t)})).replace(/'/g,"''"))+"'"},t.prototype._isGuid=function(t){return/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(t)},t}();e.QueryBuilder=u}])});